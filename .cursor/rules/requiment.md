# 日本人投手データビューアー 要件定義書

## 1. 概要

### 1.1 プロジェクト目的
日本人プロ野球投手（MLB所属または日本プロ野球所属）の投球データを簡単に検索・閲覧できるWebアプリケーションを開発する。MVPとして最小限の機能を実装し、ユーザーの反応を見ながら段階的に機能拡張を行う。

### 1.2 対象ユーザー
- 日本人投手のプレイに興味がある野球ファン
- MLBまたは日本プロ野球の分析者
- スポーツメディア関係者

## 2. 機能要件

### 2.1 コアMVP機能
1. **日本人投手リスト表示**
   - 固定のJSON形式で日本人投手データを保持
   - 名前（日本語・英語）を表示

2. **シーズン選択機能**
   - 選択された投手の利用可能なシーズンを表示
   - シーズン年度を選択するUIの提供

3. **試合データ表示**
   - 選択したシーズンの試合リストを表示
   - 日付、対戦相手、投球イニング、奪三振、与四球、失点、WHIPなどの基本成績表示

4. **投球詳細表示**
   - 選択した試合での投球データを表示
   - 投球種類、速度、結果などの1球ごとの詳細情報を表示

### 2.2 データ管理
1. 日本人投手の基本情報はJSONファイルで静的に保持
2. 試合データと投球データはMLB Stats APIから動的に取得
3. APIレスポンスは一時的にアプリケーション内でキャッシュ

## 3. ユーザーインターフェース

### 3.1 レイアウト
- シングルページアプリケーション(SPA)
- レスポンシブデザイン（モバイル対応）
- 左側に投手リスト、右側にデータ表示の2カラムレイアウト

### 3.2 主要画面
1. **メイン画面**
   - 日本人投手一覧（左側パネル）
   - データ表示エリア（右側パネル）

2. **投手選択UI**
   - 投手名リスト
   - 検索/フィルターボックス

3. **シーズン選択UI**
   - ドロップダウンまたはタブでシーズン選択

4. **試合リストUI**
   - テーブル形式で試合データを表示
   - 試合日、対戦相手、基本成績をコンパクトに表示

5. **投球詳細UI**
   - 投球データの詳細表示
   - 可能であれば簡易的な視覚化（オプション）

## 4. 技術仕様

### 4.1 開発環境
#### フロントエンド
- **Next.js** (v14.2.25) - メインフレームワーク
- **React** (v18.2.0) - UIコンポーネント
- **TypeScript** (v5.2.2) - 型安全性確保
- **Shadcn/ui** - UIコンポーネントライブラリ（重点的に利用）
- **Tailwind CSS** (v3.4.1) - スタイリング
  - tailwind-merge
  - tailwindcss-animate
- **Lucide React** (v0.446.0) - アイコンライブラリ
- **Radix UI** - アクセシブルなUIコンポーネント

#### バックエンド
- **Prisma** (v5.11.0) - ORM
- Local SQLite (初期開発用)

#### フォーム処理
- Server Actions (Next.js)
- Zod (^3.x) - スキーマバリデーション

#### ユーティリティ
- **date-fns** (v3.6.0) - 日付処理

#### 開発ツール
- **Docker** - 開発環境の標準化
- **ESLint** (v8.49.0) - コード品質
- **Autoprefixer** (v10.4.15)
- **PostCSS** (v8.4.30)

#### デプロイメント
- Vercel推奨

### 4.2 データモデル
日本人投手情報の基本JSONモデル:
```json
{
  "japanesePitchers": [
    {
      "id": 660271,
      "name": "大谷 翔平",
      "nameEn": "Shohei Ohtani",
    },
    // 他の投手データ...
  ]
}
```

### 4.3 外部API
- MLB Stats API (`https://statsapi.mlb.com/api/v1/`)
  - 選手検索: `/people/search?names={name}`
  - 試合ログ: `/people/{personId}/stats?stats=gameLog&season={season}`
  - 試合詳細: `/game/{gamePk}/playByPlay`
  - 投球データ: `/game/{gamePk}/feed/live`

### 4.4 認証
- 初期MVPでは認証機能は実装しない
- 将来的な拡張でClerk (v6.12.9)を検討

## 5. 実装計画

### 5.1 フェーズ1（MVP）
1. Next.js + TypeScriptプロジェクト設定
2. Tailwind CSS + Shadcn/uiセットアップ
3. 日本人投手JSONデータの作成
4. 投手リスト表示コンポーネントの実装
5. シーズンセレクターの実装
6. 試合リスト表示の実装
7. 投球データ表示の基本実装
8. MLB Stats APIとの連携
9. レスポンシブUIの調整
10. Dockerコンテナ化


### 5.2 将来拡張候補
1. 投球データの視覚化（ストライクゾーン、速度分布など）
2. Prisma + SQLiteによるデータ永続化
3. ユーザーアカウント（Clerk）の統合
4. お気に入り投手の保存機能
5. Server Componentsを活用したパフォーマンス最適化
6. Vercelへのデプロイメント
7. 日本プロ野球データとの連携

## 6. 制約・考慮事項

### 6.1 技術的制約
- MLB Stats APIの利用制限に注意
- Server Componentsとクライアントコンポーネントの適切な使い分け
- TypeScriptの型安全性の確保
- モバイル対応のレスポンシブデザイン

### 6.2 ユーザービリティ考慮事項
- アクセシビリティの確保（Radix UIの活用）
- データ読み込み中の適切なフィードバック
